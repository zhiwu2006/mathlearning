{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "id": "math-problems-advanced-001",
  "version": "1.0.0",
  "locale": "zh-CN",
  "metadata": {
    "gradeBand": "G5-G8",
    "subject": "Math",
    "tags": ["应用题", "逻辑推理", "代数", "几何", "数论"],
    "createdAt": "2025-01-18T10:00:00Z",
    "author": "Math Learning System"
  },
  "items": [
    {
      "id": "profit-calculation-001",
      "stem": {
        "text": "商店以每张${cost_price}元的价格进了一批贺年卡，共卖${total_revenue}元。若每张的售价相同，且不超过买入价格的两倍，则商店赚了多少元？",
        "variables": {
          "cost_price": {
            "type": "float",
            "range": {
              "min": 0.15,
              "max": 0.3
            },
            "constraints": ["cost_price > 0"]
          },
          "total_revenue": {
            "type": "float",
            "range": {
              "min": 10,
              "max": 20
            },
            "constraints": ["total_revenue > 0"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["利润计算", "单价", "总价", "约束条件"],
        "skills": ["方程建立", "条件分析", "整数解"],
        "difficulty": "M"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取已知条件（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "进价是每张${cost_price}元",
              "correct": true,
              "feedback": "正确，这是买入价格"
            },
            {
              "id": "option-1-2",
              "text": "总共卖了${total_revenue}元",
              "correct": true,
              "feedback": "正确，这是总收入"
            },
            {
              "id": "option-1-3",
              "text": "售价不超过进价的两倍",
              "correct": true,
              "feedback": "正确，这是重要约束条件"
            },
            {
              "id": "option-1-4",
              "text": "贺年卡数量是固定的",
              "correct": false,
              "feedback": "这是需要计算的，不是已知条件"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "设贺年卡数量为n张，售价为p元，根据题意可以列出什么方程？",
          "options": [
            {
              "id": "option-2-1",
              "text": "n × p = ${total_revenue}",
              "correct": true,
              "feedback": "正确！总收入 = 数量 × 售价"
            },
            {
              "id": "option-2-2",
              "text": "n × ${cost_price} = ${total_revenue}",
              "correct": false,
              "feedback": "这是总成本，不是总收入"
            },
            {
              "id": "option-2-3",
              "text": "p = 2 × ${cost_price}",
              "correct": false,
              "feedback": "这是售价的上限，不是等式关系"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "relation",
          "prompt": "根据约束条件'售价不超过买入价格的两倍'，可以得出什么不等式？",
          "options": [
            {
              "id": "option-3-1",
              "text": "p ≤ 2 × ${cost_price}",
              "correct": true,
              "feedback": "正确！售价不能超过进价的两倍"
            },
            {
              "id": "option-3-2",
              "text": "p < 2 × ${cost_price}",
              "correct": false,
              "feedback": "应该包含等于的情况"
            },
            {
              "id": "option-3-3",
              "text": "p ≥ 2 × ${cost_price}",
              "correct": false,
              "feedback": "与题意相反"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "compute",
          "prompt": "贺年卡的数量n必须满足什么条件？",
          "options": [
            {
              "id": "option-4-1",
              "text": "n = ${total_revenue} ÷ p，且n是整数",
              "correct": true,
              "feedback": "正确！数量必须是整数"
            },
            {
              "id": "option-4-2",
              "text": "n = ${total_revenue} ÷ ${cost_price}",
              "correct": false,
              "feedback": "这是用进价计算的数量，不是实际数量"
            },
            {
              "id": "option-4-3",
              "text": "n可以是任意实数",
              "correct": false,
              "feedback": "贺年卡数量必须是整数"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "要计算利润，需要知道什么？",
          "options": [
            {
              "id": "option-5-1",
              "text": "总收入和总成本的差值",
              "correct": true,
              "feedback": "正确！利润 = 总收入 - 总成本"
            },
            {
              "id": "option-5-2",
              "text": "售价和进价的差值",
              "correct": false,
              "feedback": "这是单张利润，不是总利润"
            },
            {
              "id": "option-5-3",
              "text": "只需要知道总收入",
              "correct": false,
              "feedback": "还需要知道成本"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 10,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-5": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          }
        }
      },
      "answer": {
        "final": "利润 = 总收入 - 总成本 = ${total_revenue} - n × ${cost_price}，其中n = ${total_revenue} ÷ p，p ≤ 2 × ${cost_price}",
        "unit": "元",
        "rationale": "通过建立方程和约束条件，求出贺年卡数量和售价，然后计算利润"
      }
    },
    {
      "id": "tree-planting-optimization-001",
      "stem": {
        "text": "两个班植树，一班每人植${class1_trees}棵，二班每人植${class2_trees}棵，共植树${total_trees}棵。两班人数之和最多为多少？",
        "variables": {
          "class1_trees": {
            "type": "int",
            "range": {
              "min": 2,
              "max": 5
            },
            "constraints": ["class1_trees > 0"]
          },
          "class2_trees": {
            "type": "int",
            "range": {
              "min": 4,
              "max": 8
            },
            "constraints": ["class2_trees > class1_trees"]
          },
          "total_trees": {
            "type": "int",
            "range": {
              "min": 100,
              "max": 150
            },
            "constraints": ["total_trees > 0"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["二元一次方程", "整数解", "最优化", "约束条件"],
        "skills": ["方程建立", "整数解分析", "极值求解"],
        "difficulty": "M"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取关键信息（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "一班每人植${class1_trees}棵",
              "correct": true,
              "feedback": "正确，这是一班的植树效率"
            },
            {
              "id": "option-1-2",
              "text": "二班每人植${class2_trees}棵",
              "correct": true,
              "feedback": "正确，这是二班的植树效率"
            },
            {
              "id": "option-1-3",
              "text": "共植树${total_trees}棵",
              "correct": true,
              "feedback": "正确，这是总植树量"
            },
            {
              "id": "option-1-4",
              "text": "要求两班人数之和的最大值",
              "correct": true,
              "feedback": "正确，这是优化目标"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "设一班有x人，二班有y人，根据题意可以列出什么方程？",
          "options": [
            {
              "id": "option-2-1",
              "text": "${class1_trees}x + ${class2_trees}y = ${total_trees}",
              "correct": true,
              "feedback": "正确！总植树量 = 一班植树量 + 二班植树量"
            },
            {
              "id": "option-2-2",
              "text": "${class1_trees}x - ${class2_trees}y = ${total_trees}",
              "correct": false,
              "feedback": "符号错误"
            },
            {
              "id": "option-2-3",
              "text": "x + y = ${total_trees}",
              "correct": false,
              "feedback": "这是总人数，不是总植树量"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "relation",
          "prompt": "我们要求的是x + y的最大值，如何从方程中表达x + y？",
          "options": [
            {
              "id": "option-3-1",
              "text": "从方程中解出一个变量，用另一个变量表示",
              "correct": true,
              "feedback": "正确！可以将y用x表示，然后表达x + y"
            },
            {
              "id": "option-3-2",
              "text": "直接使用x + y = ${total_trees}",
              "correct": false,
              "feedback": "这是错误的等式"
            },
            {
              "id": "option-3-3",
              "text": "x + y = (${total_trees} - ${class2_trees}y) ÷ ${class1_trees}",
              "correct": false,
              "feedback": "这个表达式不正确"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "compute",
          "prompt": "从方程${class1_trees}x + ${class2_trees}y = ${total_trees}中，解出y的表达式：",
          "options": [
            {
              "id": "option-4-1",
              "text": "y = (${total_trees} - ${class1_trees}x) ÷ ${class2_trees}",
              "correct": true,
              "feedback": "正确！这是y关于x的表达式"
            },
            {
              "id": "option-4-2",
              "text": "y = (${total_trees} + ${class1_trees}x) ÷ ${class2_trees}",
              "correct": false,
              "feedback": "符号错误"
            },
            {
              "id": "option-4-3",
              "text": "y = ${class2_trees}x - ${total_trees}",
              "correct": false,
              "feedback": "表达式错误"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "为了使x + y最大，且x、y都是正整数，应该满足什么条件？",
          "options": [
            {
              "id": "option-5-1",
              "text": "x取最小可能值，使得y为正整数",
              "correct": true,
              "feedback": "正确！要使总和最大，需要让效率高的班级人数尽可能多"
            },
            {
              "id": "option-5-2",
              "text": "x取最大可能值",
              "correct": false,
              "feedback": "这会使总和变小"
            },
            {
              "id": "option-5-3",
              "text": "x = y",
              "correct": false,
              "feedback": "这不是最优解"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 10,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-5": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          }
        }
      },
      "answer": {
        "final": "两班人数之和的最大值为(${total_trees} - ${class2_trees}) ÷ (${class1_trees} + ${class2_trees}) + 1，其中x取最小正整数解",
        "unit": "人",
        "rationale": "通过二元一次方程求解整数解，分析极值条件，得出两班人数之和的最大值"
      }
    },
    {
      "id": "price-optimization-001",
      "stem": {
        "text": "某商店第一天卖出一些笔，第二天每支笔降价${price_drop}元后多卖出${more_sold}支，第三天每支笔比第一天涨价${price_rise}元后比第一天少卖出${less_sold}支。如果这三天每天卖得的钱相同，那么第一天每支笔售价是多少元？",
        "variables": {
          "price_drop": {
            "type": "int",
            "range": {
              "min": 1,
              "max": 3
            },
            "constraints": ["price_drop > 0"]
          },
          "more_sold": {
            "type": "int",
            "range": {
              "min": 50,
              "max": 200
            },
            "constraints": ["more_sold > 0"]
          },
          "price_rise": {
            "type": "int",
            "range": {
              "min": 2,
              "max": 5
            },
            "constraints": ["price_rise > price_drop"]
          },
          "less_sold": {
            "type": "int",
            "range": {
              "min": 100,
              "max": 300
            },
            "constraints": ["less_sold > more_sold"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["价格与销量关系", "收入相等", "一元二次方程"],
        "skills": ["变量设定", "方程建立", "公式应用"],
        "difficulty": "H"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取关键信息（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "第二天降价${price_drop}元",
              "correct": true,
              "feedback": "正确，这是价格变化信息"
            },
            {
              "id": "option-1-2",
              "text": "第二天多卖出${more_sold}支",
              "correct": true,
              "feedback": "正确，这是销量变化信息"
            },
            {
              "id": "option-1-3",
              "text": "第三天比第一天涨价${price_rise}元",
              "correct": true,
              "feedback": "正确，这是第三天的价格变化"
            },
            {
              "id": "option-1-4",
              "text": "三天收入相同",
              "correct": true,
              "feedback": "正确，这是核心条件"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "设第一天售价为p元，销量为q支，则第二天的售价和销量分别是多少？",
          "options": [
            {
              "id": "option-2-1",
              "text": "售价：p - ${price_drop}元，销量：q + ${more_sold}支",
              "correct": true,
              "feedback": "正确！降价后售价减少，销量增加"
            },
            {
              "id": "option-2-2",
              "text": "售价：p + ${price_drop}元，销量：q - ${more_sold}支",
              "correct": false,
              "feedback": "这是涨价的情况，与题意不符"
            },
            {
              "id": "option-2-3",
              "text": "售价：p - ${price_drop}元，销量：q支",
              "correct": false,
              "feedback": "销量也应该变化"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "compute",
          "prompt": "第三天的售价和销量分别是多少？",
          "options": [
            {
              "id": "option-3-1",
              "text": "售价：p + ${price_rise}元，销量：q - ${less_sold}支",
              "correct": true,
              "feedback": "正确！比第一天涨价，所以销量减少"
            },
            {
              "id": "option-3-2",
              "text": "售价：p + ${price_rise}元，销量：q + ${less_sold}支",
              "correct": false,
              "feedback": "涨价后销量应该减少"
            },
            {
              "id": "option-3-3",
              "text": "售价：p - ${price_rise}元，销量：q - ${less_sold}支",
              "correct": false,
              "feedback": "这是降价的情况"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "relation",
          "prompt": "根据'三天收入相同'的条件，可以列出什么等式？",
          "options": [
            {
              "id": "option-4-1",
              "text": "p × q = (p - ${price_drop}) × (q + ${more_sold})",
              "correct": true,
              "feedback": "正确！第一天收入 = 第二天收入"
            },
            {
              "id": "option-4-2",
              "text": "p × q = (p + ${price_rise}) × (q - ${less_sold})",
              "correct": true,
              "feedback": "正确！第一天收入 = 第三天收入"
            },
            {
              "id": "option-4-3",
              "text": "p + q = (p - ${price_drop}) + (q + ${more_sold})",
              "correct": false,
              "feedback": "这是数量关系，不是收入关系"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "从方程p × q = (p - ${price_drop}) × (q + ${more_sold})中，可以解出什么关系？",
          "options": [
            {
              "id": "option-5-1",
              "text": "${price_drop} × q = ${more_sold} × (p - ${price_drop})",
              "correct": true,
              "feedback": "正确！展开后得到这个关系式"
            },
            {
              "id": "option-5-2",
              "text": "p × q = p × q + ${more_sold} × p - ${price_drop} × q - ${price_drop} × ${more_sold}",
              "correct": false,
              "feedback": "这是展开过程，不是最终关系"
            },
            {
              "id": "option-5-3",
              "text": "${price_drop} + ${more_sold} = p + q",
              "correct": false,
              "feedback": "这个关系不正确"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 12,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          },
          "step-5": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          }
        }
      },
      "answer": {
        "final": "第一天每支笔售价为${price_drop} × ${more_sold} ÷ (${price_drop} + ${more_sold}) + ${price_drop}元",
        "unit": "元",
        "rationale": "通过建立价格与销量的关系方程，利用三天收入相同的条件求解第一天售价"
      }
    },
    {
      "id": "boat-speed-problem-001",
      "stem": {
        "text": "一条河上有A，B两个码头，A在上游，B在下游。甲、乙两人分别从A，B同时出发，划船相向而行，${meet_time}小时后相遇。如果甲、乙两人分别从A，B同时出发划船同向而行，乙${chase_time}小时后追上甲。已知甲在静水中划船的速度为每小时${speed_A}千米，则乙在静水中划船每小时行驶多少千米？",
        "variables": {
          "meet_time": {
            "type": "int",
            "range": {
              "min": 2,
              "max": 6
            },
            "constraints": ["meet_time > 0"]
          },
          "chase_time": {
            "type": "int",
            "range": {
              "min": 10,
              "max": 20
            },
            "constraints": ["chase_time > meet_time"]
          },
          "speed_A": {
            "type": "int",
            "range": {
              "min": 4,
              "max": 10
            },
            "constraints": ["speed_A > 0"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["相对速度", "流水问题", "追及问题", "相遇问题"],
        "skills": ["速度分析", "方程建立", "物理建模"],
        "difficulty": "H"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取关键信息（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "相向而行${meet_time}小时相遇",
              "correct": true,
              "feedback": "正确，这是相遇问题的条件"
            },
            {
              "id": "option-1-2",
              "text": "同向而行${chase_time}小时追上",
              "correct": true,
              "feedback": "正确，这是追及问题的条件"
            },
            {
              "id": "option-1-3",
              "text": "甲静水速度为${speed_A}千米/小时",
              "correct": true,
              "feedback": "正确，这是已知的静水速度"
            },
            {
              "id": "option-1-4",
              "text": "A在上游，B在下游",
              "correct": true,
              "feedback": "正确，这决定了顺流逆流的方向"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "设乙在静水中的速度为v₂千米/小时，水流速度为c千米/小时。当甲从A出发（顺流）时，他的实际速度是多少？",
          "options": [
            {
              "id": "option-2-1",
              "text": "${speed_A} + c",
              "correct": true,
              "feedback": "正确！顺流速度 = 静水速度 + 水流速度"
            },
            {
              "id": "option-2-2",
              "text": "${speed_A} - c",
              "correct": false,
              "feedback": "这是逆流速度，不是顺流速度"
            },
            {
              "id": "option-2-3",
              "text": "${speed_A}",
              "correct": false,
              "feedback": "这是静水速度，不是实际速度"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "compute",
          "prompt": "当乙从B出发（逆流）时，他的实际速度是多少？",
          "options": [
            {
              "id": "option-3-1",
              "text": "v₂ - c",
              "correct": true,
              "feedback": "正确！逆流速度 = 静水速度 - 水流速度"
            },
            {
              "id": "option-3-2",
              "text": "v₂ + c",
              "correct": false,
              "feedback": "这是顺流速度，不是逆流速度"
            },
            {
              "id": "option-3-3",
              "text": "v₂",
              "correct": false,
              "feedback": "这是静水速度，不是实际速度"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "relation",
          "prompt": "根据相遇条件，相向而行${meet_time}小时相遇，可以列出什么方程？",
          "options": [
            {
              "id": "option-4-1",
              "text": "${meet_time} × ((${speed_A} + c) + (v₂ - c)) = AB距离",
              "correct": true,
              "feedback": "正确！相遇时两人行驶距离之和等于AB距离"
            },
            {
              "id": "option-4-2",
              "text": "${meet_time} × ((${speed_A} + c) - (v₂ - c)) = AB距离",
              "correct": false,
              "feedback": "这是追及问题的公式，不是相遇问题"
            },
            {
              "id": "option-4-3",
              "text": "${meet_time} × ${speed_A} × v₂ = AB距离",
              "correct": false,
              "feedback": "没有考虑水流速度的影响"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "从相遇方程和追及方程中，可以消去哪个未知数？",
          "options": [
            {
              "id": "option-5-1",
              "text": "可以消去AB距离和c（水流速度）",
              "correct": true,
              "feedback": "正确！通过两个方程联立，可以消去AB距离和水流速度c"
            },
            {
              "id": "option-5-2",
              "text": "只能消去AB距离",
              "correct": false,
              "feedback": "实际上可以同时消去两个未知数"
            },
            {
              "id": "option-5-3",
              "text": "只能消去水流速度c",
              "correct": false,
              "feedback": "可以同时消去两个未知数"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 12,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          },
          "step-5": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          }
        }
      },
      "answer": {
        "final": "乙在静水中的速度为(${speed_A} × ${chase_time}) ÷ ${meet_time}千米/小时",
        "unit": "千米/小时",
        "rationale": "通过分析相遇问题和追及问题的速度关系，建立方程组求解乙的静水速度"
      }
    },
    {
      "id": "number-theory-puzzle-001",
      "stem": {
        "text": "某个两位数是${factor1}的倍数，加${add1}是${factor2}的倍数，加${add2}是${factor3}的倍数，加${add3}是${factor4}的倍数，那么这个两位数是多少？",
        "variables": {
          "factor1": {
            "type": "choice",
            "choices": [2, 3, 5]
          },
          "add1": {
            "type": "int",
            "range": {
              "min": 1,
              "max": 3
            },
            "constraints": ["add1 > 0"]
          },
          "factor2": {
            "type": "choice",
            "choices": [3, 4, 5]
          },
          "add2": {
            "type": "int",
            "range": {
              "min": 2,
              "max": 4
            },
            "constraints": ["add2 > add1"]
          },
          "factor3": {
            "type": "choice",
            "choices": [4, 5, 6]
          },
          "add3": {
            "type": "int",
            "range": {
              "min": 3,
              "max": 5
            },
            "constraints": ["add3 > add2"]
          },
          "factor4": {
            "type": "choice",
            "choices": [5, 6, 7]
          }
        }
      },
      "taxonomy": {
        "concepts": ["同余定理", "最小公倍数", "数论", "约束条件"],
        "skills": ["模运算", "同余分析", "枚举验证"],
        "difficulty": "M"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "将题目条件转化为数学表达式（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "N ≡ 0 (mod ${factor1})",
              "correct": true,
              "feedback": "正确！N是${factor1}的倍数"
            },
            {
              "id": "option-1-2",
              "text": "N ≡ -${add1} (mod ${factor2})",
              "correct": true,
              "feedback": "正确！N + ${add1} ≡ 0 (mod ${factor2})"
            },
            {
              "id": "option-1-3",
              "text": "N ≡ -${add2} (mod ${factor3})",
              "correct": true,
              "feedback": "正确！N + ${add2} ≡ 0 (mod ${factor3})"
            },
            {
              "id": "option-1-4",
              "text": "N ≡ -${add3} (mod ${factor4})",
              "correct": true,
              "feedback": "正确！N + ${add3} ≡ 0 (mod ${factor4})"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "这个数论问题的求解方法是什么？",
          "options": [
            {
              "id": "option-2-1",
              "text": "使用中国剩余定理",
              "correct": true,
              "feedback": "正确！这是一个典型的同余方程组"
            },
            {
              "id": "option-2-2",
              "text": "使用欧几里得算法",
              "correct": false,
              "feedback": "这是求最大公约数的算法"
            },
            {
              "id": "option-2-3",
              "text": "使用费马小定理",
              "correct": false,
              "feedback": "这是用于素数模的定理"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "compute",
          "prompt": "由于这是两位数，最直接的求解方法是什么？",
          "options": [
            {
              "id": "option-3-1",
              "text": "枚举10-99中满足第一个条件的数，然后验证其他条件",
              "correct": true,
              "feedback": "正确！枚举法在这种小范围内很有效"
            },
            {
              "id": "option-3-2",
              "text": "直接使用公式计算",
              "correct": false,
              "feedback": "对于多个模数，直接公式较复杂"
            },
            {
              "id": "option-3-3",
              "text": "只能通过试错法",
              "correct": false,
              "feedback": "有更系统的方法"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "relation",
          "prompt": "从条件'N是${factor1}的倍数'，我们首先应该考虑哪些数？",
          "options": [
            {
              "id": "option-4-1",
              "text": "10, 12, 14, ..., 98（如果${factor1} = 2）",
              "correct": true,
              "feedback": "正确！列出所有两位数的${factor1}的倍数"
            },
            {
              "id": "option-4-2",
              "text": "11, 13, 15, ..., 99",
              "correct": false,
              "feedback": "这些不是${factor1}的倍数"
            },
            {
              "id": "option-4-3",
              "text": "${factor1}, ${factor1}×2, ${factor1}×3, ...",
              "correct": false,
              "feedback": "包含了非两位数"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "验证候选数时，应该按什么顺序检查条件？",
          "options": [
            {
              "id": "option-5-1",
              "text": "从限制性最强的条件开始验证",
              "correct": true,
              "feedback": "正确！这样可以快速排除不符合的数"
            },
            {
              "id": "option-5-2",
              "text": "按题目给出的顺序验证",
              "correct": false,
              "feedback": "这不是最优策略"
            },
            {
              "id": "option-5-3",
              "text": "随机验证",
              "correct": false,
              "feedback": "这样效率很低"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 10,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-5": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          }
        }
      },
      "answer": {
        "final": "通过枚举${factor1}的倍数并验证其他同余条件，找到满足所有条件的两位数",
        "unit": "个",
        "rationale": "利用同余定理和枚举法，在两位数范围内找到满足多个同余条件的数"
      }
    },
    {
      "id": "chinese-character-puzzle-001",
      "stem": {
        "text": "在三个词语'尽心尽力'、'力可拔山'和'山穷水尽'中，每个汉字代表${min_num}至${max_num}之间的数字，相同的汉字代表相同的数字，不同的汉字代表不同的数字。如果每个词语的汉字所代表的数字之和都是${sum_target}，且'尽'>'山'>'力'，则'水'最大等于多少？",
        "variables": {
          "min_num": {
            "type": "int",
            "range": {
              "min": 1,
              "max": 3
            },
            "constraints": ["min_num > 0"]
          },
          "max_num": {
            "type": "int",
            "range": {
              "min": 6,
              "max": 9
            },
            "constraints": ["max_num > min_num + 3"]
          },
          "sum_target": {
            "type": "int",
            "range": {
              "min": 15,
              "max": 25
            },
            "constraints": ["sum_target > 0"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["汉字代数", "约束条件", "逻辑推理", "优化问题"],
        "skills": ["变量映射", "约束分析", "极值求解"],
        "difficulty": "H"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取关键信息（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "不同汉字代表不同数字",
              "correct": true,
              "feedback": "正确，这是基本约束"
            },
            {
              "id": "option-1-2",
              "text": "相同汉字代表相同数字",
              "correct": true,
              "feedback": "正确，这是映射的一致性要求"
            },
            {
              "id": "option-1-3",
              "text": "每个词语数字之和为${sum_target}",
              "correct": true,
              "feedback": "正确，这是核心条件"
            },
            {
              "id": "option-1-4",
              "text": "'尽'>'山'>'力'",
              "correct": true,
              "feedback": "正确，这是排序约束"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "三个词语涉及哪些不同的汉字？",
          "options": [
            {
              "id": "option-2-1",
              "text": "尽、心、力、可、拔、山、穷、水（共8个字）",
              "correct": true,
              "feedback": "正确！这些是所有出现的不同汉字"
            },
            {
              "id": "option-2-2",
              "text": "尽、心、力、山、水（共5个字）",
              "correct": false,
              "feedback": "遗漏了一些汉字"
            },
            {
              "id": "option-2-3",
              "text": "只有'尽心尽力'中的字",
              "correct": false,
              "feedback": "需要考虑所有三个词语"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "compute",
          "prompt": "根据词语'尽心尽力'，可以列出什么等式？",
          "options": [
            {
              "id": "option-3-1",
              "text": "尽 + 心 + 力 + 尽 = ${sum_target}",
              "correct": true,
              "feedback": "正确！'尽心尽力'有4个字，其中'尽'出现两次"
            },
            {
              "id": "option-3-2",
              "text": "尽 + 心 + 力 = ${sum_target}",
              "correct": false,
              "feedback": "忽略了'尽'字重复出现"
            },
            {
              "id": "option-3-3",
              "text": "2×尽 + 心 + 力 = ${sum_target}",
              "correct": true,
              "feedback": "正确！这是规范的数学表达"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "relation",
          "prompt": "根据'力可拔山'和'山穷水尽'，可以列出什么方程组？",
          "options": [
            {
              "id": "option-4-1",
              "text": "力 + 可 + 拔 + 山 = ${sum_target}，山 + 穷 + 水 + 尽 = ${sum_target}",
              "correct": true,
              "feedback": "正确！这是另外两个词语的方程"
            },
            {
              "id": "option-4-2",
              "text": "力 + 可 + 拔 + 山 + 山 + 穷 + 水 + 尽 = ${sum_target}",
              "correct": false,
              "feedback": "这是总和，不是分别的方程"
            },
            {
              "id": "option-4-3",
              "text": "力 + 山 + 水 = ${sum_target}",
              "correct": false,
              "feedback": "遗漏了其他汉字"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "要使'水'最大，应该采取什么策略？",
          "options": [
            {
              "id": "option-5-1",
              "text": "在满足'尽'>'山'>'力'的条件下，尽可能给'水'分配大的数字",
              "correct": true,
              "feedback": "正确！在约束条件下最大化目标变量"
            },
            {
              "id": "option-5-2",
              "text": "给所有字分配相同的数字",
              "correct": false,
              "feedback": "违反了不同字不同数字的约束"
            },
            {
              "id": "option-5-3",
              "text": "先确定'水'的值，再反推其他字",
              "correct": false,
              "feedback": "这样难以满足所有约束条件"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 12,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          },
          "step-5": {
            "score": 3,
            "penaltyPerRetry": 0.5,
            "minScore": 1
          }
        }
      },
      "answer": {
        "final": "通过建立方程组并在约束条件下优化，求得'水'的最大可能值",
        "unit": "数字",
        "rationale": "通过建立汉字到数字的映射方程，在满足所有约束条件下求'水'的最大值"
      }
    },
    {
      "id": "work-rate-problem-001",
      "stem": {
        "text": "有一批作业，王老师原计划每小时批改${original_rate}本。批改了${work_hours}小时后，他决定每小时批改${new_rate}本，结果提前${early_hours}小时批改完。那么这批作业有多少本？",
        "variables": {
          "original_rate": {
            "type": "int",
            "range": {
              "min": 4,
              "max": 10
            },
            "constraints": ["original_rate > 0"]
          },
          "work_hours": {
            "type": "int",
            "range": {
              "min": 1,
              "max": 4
            },
            "constraints": ["work_hours > 0"]
          },
          "new_rate": {
            "type": "int",
            "range": {
              "min": 6,
              "max": 12
            },
            "constraints": ["new_rate > original_rate"]
          },
          "early_hours": {
            "type": "int",
            "range": {
              "min": 2,
              "max": 5
            },
            "constraints": ["early_hours > 0"]
          }
        }
      },
      "taxonomy": {
        "concepts": ["工作效率", "时间优化", "工作量恒定"],
        "skills": ["方程建立", "变量关系", "实际问题建模"],
        "difficulty": "M"
      },
      "steps": [
        {
          "id": "step-1",
          "type": "extract",
          "prompt": "从题目中提取关键信息（可多选）",
          "multipleSelect": true,
          "options": [
            {
              "id": "option-1-1",
              "text": "原计划每小时批改${original_rate}本",
              "correct": true,
              "feedback": "正确，这是原工作效率"
            },
            {
              "id": "option-1-2",
              "text": "先工作了${work_hours}小时",
              "correct": true,
              "feedback": "正确，这是第一阶段工作时间"
            },
            {
              "id": "option-1-3",
              "text": "后改为每小时批改${new_rate}本",
              "correct": true,
              "feedback": "正确，这是新工作效率"
            },
            {
              "id": "option-1-4",
              "text": "提前${early_hours}小时完成",
              "correct": true,
              "feedback": "正确，这是时间节省"
            }
          ]
        },
        {
          "id": "step-2",
          "type": "question",
          "prompt": "设总作业量为W本，原计划需要多少小时完成？",
          "options": [
            {
              "id": "option-2-1",
              "text": "W ÷ ${original_rate} 小时",
              "correct": true,
              "feedback": "正确！时间 = 工作量 ÷ 效率"
            },
            {
              "id": "option-2-2",
              "text": "W ÷ ${new_rate} 小时",
              "correct": false,
              "feedback": "这是新效率下的时间，不是原计划时间"
            },
            {
              "id": "option-2-3",
              "text": "${work_hours} + ${early_hours} 小时",
              "correct": false,
              "feedback": "这不是原计划时间"
            }
          ]
        },
        {
          "id": "step-3",
          "type": "compute",
          "prompt": "实际完成的总时间是多少小时？",
          "options": [
            {
              "id": "option-3-1",
              "text": "${work_hours} + (W - ${original_rate} × ${work_hours}) ÷ ${new_rate}",
              "correct": true,
              "feedback": "正确！第一阶段时间 + 第二阶段时间"
            },
            {
              "id": "option-3-2",
              "text": "W ÷ ${new_rate}",
              "correct": false,
              "feedback": "这是全程用新效率的时间"
            },
            {
              "id": "option-3-3",
              "text": "${work_hours} + (W ÷ ${new_rate})",
              "correct": false,
              "feedback": "第二阶段时间计算错误"
            }
          ]
        },
        {
          "id": "step-4",
          "type": "relation",
          "prompt": "根据'提前${early_hours}小时完成'的条件，可以列出什么方程？",
          "options": [
            {
              "id": "option-4-1",
              "text": "原计划时间 - 实际时间 = ${early_hours}",
              "correct": true,
              "feedback": "正确！提前的时间 = 原计划时间 - 实际时间"
            },
            {
              "id": "option-4-2",
              "text": "实际时间 - 原计划时间 = ${early_hours}",
              "correct": false,
              "feedback": "方向反了"
            },
            {
              "id": "option-4-3",
              "text": "原计划时间 + 实际时间 = ${early_hours}",
              "correct": false,
              "feedback": "关系错误"
            }
          ]
        },
        {
          "id": "step-5",
          "type": "plan",
          "prompt": "将表达式代入方程后，得到的一元一次方程是什么形式？",
          "options": [
            {
              "id": "option-5-1",
              "text": "关于W的一次方程：aW + b = 0",
              "correct": true,
              "feedback": "正确！所有项目都可以整理成W的一次方程"
            },
            {
              "id": "option-5-2",
              "text": "关于W的二次方程",
              "correct": false,
              "feedback": "这应该是一次方程"
            },
            {
              "id": "option-5-3",
              "text": "关于时间t的方程",
              "correct": false,
              "feedback": "应该是关于工作量W的方程"
            }
          ]
        }
      ],
      "transitions": [
        {
          "fromStep": "step-1",
          "onCorrect": "step-2",
          "onWrong": "step-1",
          "maxRetries": 2
        },
        {
          "fromStep": "step-2",
          "onCorrect": "step-3",
          "onWrong": "step-2",
          "maxRetries": 2
        },
        {
          "fromStep": "step-3",
          "onCorrect": "step-4",
          "onWrong": "step-3",
          "maxRetries": 2
        },
        {
          "fromStep": "step-4",
          "onCorrect": "step-5",
          "onWrong": "step-4",
          "maxRetries": 2
        },
        {
          "fromStep": "step-5",
          "onCorrect": "",
          "onWrong": "step-5",
          "maxRetries": 2
        }
      ],
      "scoring": {
        "total": 10,
        "perStep": {
          "step-1": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-2": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-3": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-4": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          },
          "step-5": {
            "score": 2,
            "penaltyPerRetry": 0.3,
            "minScore": 0.5
          }
        }
      },
      "answer": {
        "final": "总作业量 = ${original_rate} × ${new_rate} × (${work_hours} + ${early_hours}) ÷ (${new_rate} - ${original_rate}) 本",
        "unit": "本",
        "rationale": "通过建立工作量、效率和时间的关系方程，求解总作业量"
      }
    }
  ]
}